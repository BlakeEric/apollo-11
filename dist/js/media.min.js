/*! apollo-11 v0.0.1 | (c) 2020 Blake Lundquist | MIT License | https://github.com/BlakeEric/apollo-11 */
"use strict";var media=(function(){function a(){var n=document.getElementById("queue"),e=document.getElementById("media-count"),t=document.getElementById("queue-instructions");document.getElementById("download-media");state.toggleStudyGuideDownloadButton(),e.innerHTML=state.queue.length,n.innerHTML="",0!=state.queue.length?(t.style.display="none",state.queue.forEach((function(e){var t=state.mediaData[e.id];n.appendChild(t)}))):t.style.display="block"}return{init:function(){var e,u;e=document.querySelectorAll("figure.video, figure.audio"),u={},e.forEach((function(e){e.parentNode.removeChild(e);var t=document.createElement("button");t.innerHTML="Ã—",t.classList.add("remove-from-queue","button-standard"),e.appendChild(t);var n=document.createElement("button");n.innerHTML="Play",n.classList.add("play-media","button-standard"),e.appendChild(n);var a=document.createElement("button");a.innerHTML="Pause",a.classList.add("pause-media","button-standard"),e.appendChild(a),u[e.getAttribute("id")]=e})),state.set("mediaData",u),a(),events.on("click",".toggleMedia",(function(e){e.preventDefault(),(function(t){if(state.queue.find((function(e){return e.id===t})))displayAlert("Item already in queue");else{var e={id:t,media:state.mediaData[t].querySelector("audio, video"),description:state.mediaData[t].querySelector("figcaption").innerHTML.trim()};state.set("queue",state.queue.concat(e)),a()}})(e.target.getAttribute("data-media"))})),events.on("click",".remove-from-queue",(function(e){e.preventDefault();var t,n=e.target.parentNode.getAttribute("id");t=n,document.querySelector("#"+t).classList.remove("is-playing"),queue=state.queue.filter((function(e){return e.id!==t})),state.set("queue",queue),a()})),events.on("click",".play-media",(function(e){e.preventDefault(),(function(t){document.querySelectorAll("audio, video").forEach((function(e){e.pause()}));var e=state.queue.find((function(e){return e.id==t}));document.querySelector("#"+t).classList.add("is-playing"),e.media.play()})(e.target.parentNode.getAttribute("id"))})),events.on("click",".pause-media",(function(e){e.preventDefault(),(function(t){document.querySelectorAll("audio, video").forEach((function(e){e.pause()}));var e=state.queue.find((function(e){return e.id==t}));document.querySelector(".is-playing")&&document.querySelector(".is-playing").classList.remove("is-playing"),e.media.pause()})(e.target.parentNode.getAttribute("id"))})),events.on("click","#download-media",(function(e){e.preventDefault(),download()}))}}})();